<?xml version="1.0" encoding="US-ASCII"?>
<!-- This template is for creating an Internet Draft using xml2rfc,
    which is available here: http://xml.resource.org. -->
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!-- One method to get references from the online citation libraries.
    There has to be one entity for each item to be referenced.
    An alternate method (rfc include) is described in the references. -->
<!ENTITY RFC678 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.0678.xml">
<!ENTITY RFC768 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.0768.xml">
<!ENTITY RFC1122 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.1122.xml">
<!ENTITY RFC1123 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.1123.xml">
<!ENTITY RFC1191 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.1191.xml">
<!ENTITY RFC1981 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.1981.xml">
<!ENTITY RFC2119 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.2119.xml">
<!ENTITY RFC2460 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.2460.xml">
<!ENTITY RFC2475 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.2475.xml">
<!ENTITY RFC2553 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.2553.xml">
<!ENTITY RFC2923 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.2923.xml">
<!ENTITY RFC3168 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.3168.xml">
<!ENTITY RFC3260 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.3260.xml">
<!ENTITY RFC3395 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.3395.xml">
<!ENTITY RFC3396 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.3396.xml">
<!ENTITY RFC3493 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.3493.xml">
<!ENTITY RFC3552 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.3552.xml">
<!ENTITY RFC3678 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.3678.xml">
<!ENTITY RFC3828 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.3828.xml">
<!ENTITY RFC4340 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.4340.xml">
<!ENTITY RFC4820 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.4820.xml">
<!ENTITY RFC4821 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.4821.xml">
<!ENTITY RFC4828 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.4828.xml">
<!ENTITY RFC4890 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.4890.xml">
<!ENTITY RFC4960 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.4960.xml">
<!ENTITY RFC5082 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5082.xml">
<!ENTITY RFC5097 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5097.xml">
<!ENTITY RFC5226 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5226.xml">
<!ENTITY RFC6679 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6679.xml">
<!ENTITY RFC6935 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6935.xml">
<!ENTITY RFC6936 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6936.xml">
<!ENTITY RFC6951 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6951.xml">
<!ENTITY RFC6968 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6968.xml">
<!ENTITY RFC6633 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6633.xml">
<!ENTITY RFC8085 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.8085.xml">
<!ENTITY I-D.ietf-6man-rfc1981bis SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml3/reference.I-D.draft-ietf-6man-rfc1981bis-08.xml">
<!ENTITY I-D.ietf-tsvwg-udp-options SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml3/reference.I-D.draft-ietf-tsvwg-udp-options-01.xml">
<!ENTITY I-D.ietf-tsvwg-sctp-dtls-encaps SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml3/reference.I-D.draft-ietf-tsvwg-sctp-dtls-encaps-09.xml">
<!ENTITY I-D.ietf-quic-transport SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml3/reference.I-D.draft-ietf-quic-transport-04.xml">
]>
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<!-- used by XSLT processors -->
<!-- For a complete list and description of processing instructions (PIs),
    please see http://xml.resource.org/authoring/README.html. -->
<!-- Below are generally applicable Processing Instructions (PIs) that most I-Ds might want to use.
    (Here they are set differently than their defaults in xml2rfc v1.32) -->
<?rfc strict="yes" ?>
<!-- give errors regarding ID-nits and DTD validation -->
<!-- control the table of contents (ToC) -->
<?rfc toc="yes"?>
<!-- generate a ToC -->
<?rfc tocdepth="4"?>
<!-- the number of levels of subsections in ToC. default: 3 -->
<!-- control references -->
<?rfc symrefs="yes"?>
<!-- use symbolic references tags, i.e, [RFC2119] instead of [1] -->
<?rfc sortrefs="yes" ?>
<!-- sort the reference entries alphabetically -->
<!-- control vertical white space
    (using these PIs as follows is recommended by the RFC Editor) -->
<?rfc compact="yes" ?>
<!-- do not start each main section on a new page -->
<?rfc subcompact="no" ?>
<!-- keep one blank line between list items -->
<!-- end of list of popular I-D processing instructions -->
<rfc category="std"
     docName="draft-fairhurst-tsvwg-datagram-plpmtud-01-to-be.txt"
     ipr="trust200902">
<!-- category values: std, bcp, info, exp, and historic
     ipr values: trust200902, noModificationTrust200902, noDerivativesTrust200902,
                 or pre5378Trust200902
    you can add the attributes updates="NNNN" and obsoletes="NNNN"
    they will automatically be output with "(if approved)" -->

<!-- ***** FRONT MATTER ***** -->

<front>
<!-- The abbreviated title is used in the page header - it is only necessary if the
     full title is longer than 39 characters -->

<title abbrev="Datagram PLPMTUD ">
Packetization Layer Path MTU Discovery for Datagram Transports
</title>

<!-- add 'role="editor"' below for the editors if appropriate -->
<!-- Another author who claims to be an editor -->

<author fullname="Godred Fairhurst" initials="G" surname="Fairhurst">
<organization>University of Aberdeen</organization>
<address>
<postal>
<street>School of Engineering</street>
<street>Fraser Noble Building</street>
<city>Aberdeen</city>
<region></region>
<code>AB24 3UE</code>
<country>UK</country>
</postal>
<email>gorry@erg.abdn.ac.uk</email>
</address>
</author>

<author fullname="Tom Jones" initials="T" surname="Jones">
<organization>University of Aberdeen</organization>
<address>
<postal>
<street>School of Engineering</street>
<street>Fraser Noble Building</street>
<city>Aberdeen</city>
<region></region>
<code>AB24 3UE</code>
<country>UK</country>
</postal>
<email>tom@erg.abdn.ac.uk</email>
</address>
</author>

<author fullname="Michael Tuexen" initials="M" surname="Tuexen">
<organization>Muenster University of Applied Sciences</organization>
<address>
<postal>
<street>Stegerwaldstrasse 39</street>
<code>48565</code>
<city>Steinfurt</city>
<region></region>
<country>DE</country>
</postal>
<email>tuexen@fh-muenster.de</email>
</address>
</author>

<author fullname="Irene Ruengeler" initials="I" surname="Ruengeler">
<organization>Muenster University of Applied Sciences</organization>
<address>
<postal>
<street>Stegerwaldstrasse 39</street>
<code>48565</code>
<city>Steinfurt</city>
<region></region>
<country>DE</country>
</postal>
<email>i.ruengeler@fh-muenster.de</email>
</address>
</author>

<date />

<!-- Meta-data Declarations -->

<area>Transport</area>

<workgroup>Internet Engineering Task Force</workgroup>

<!-- WG name at the upperleft corner of the doc,
     IETF is fine for individual submissions. If this element is not
     present, the default is "Network Working Group", which is used by the
     RFC Editor as a nod to the history of the IETF. -->

<keyword>UDP SCTP Transport PMTUD PLPMTUD</keyword>

<!-- Keywords will be incorporated into HTML output
     files in a meta tag but they have no effect on text or nroff output. If
     you submit your draft to the RFC Editor, the keywords will be used for
     the search engine. -->

<abstract>
<t>This document describes a robust method for Path MTU Discovery (PMTUD) for
datagram packetization layers.
It allows these layers to probe an Internet path with progressively larger
packets to determine a maximum packet size This method is described as an
extension to RFC 1191 and RFC 1981, which specify ICMP-based Path MTU Discovery
for IP versions 4 and 6.
The document provides functionally for datagram transports that is equivalent
to the packetization layer PMTUD specification for TCP, specified in RFC4821.</t>
</abstract>
</front>

<middle>
<section title="Introduction">
<t>The IETF has specified datagram transport using UDP, SCTP, SCTP/UDP, DCCP,
and DCCP/UDP as well as upper layer protocols layered on top of these
transports. </t>

<t>Classical Path MTU Discovery (PMTUD) can be used with any transport that is
able to process ICMP Packet Too Big (PTB) messages (e.g.,
<xref target="RFC1191"/> and <xref target="I-D.ietf-6man-rfc1981bis"/>).
It adjusts the Effective Path MTU (PMTU), based on reception of ICMP PTB
messages to decrease the PMTU when this is larger than the value supported along
a path, and a method that increases the packet size in attempt to discover an
increase in the supported PMTU.
However, ICMP messages are being increasingly filtered by middleboxes
(including Firewalls) <xref target="RFC4890"/>.
Classical PMTUD is therefore subject to protocol failures (e.g., traffic using
a packet size larger than the actual supported PMTU is blackholed when ICMP PTB
messages are not delivered for some reason <xref target="RFC2923"></xref>).</t>

<t>Packetization Layer Path MTU Discovery (PLPMTUD) <xref target="RFC4821"/>
does not rely upon network or transport support for ICMP messages and is
therefore considered more robust than Classical PMTUD.
This has become the preferred approach for TCP traffic.
The general strategy is for the Packetization Layer to find an appropriate
PMTU by sending probe packets along the path with a progressively larger
packet size.
If a probe packet is successfully delivered (as determined by the PL), then
the effective Path MTU is raised to the probe size.
PLPMTUD introduces flexibility in the implementation of classical PMTUD.
It can be configured to only perform ICMP black hole recovery to increase the
robustness of classical PMTUD, or at the other extreme, all ICMP processing can
be disabled and PLPMTUD can completely replace classical Path MTU Discovery.
Using PLPMTUD, classical Path MTU Discovery can also be modified to include
additional consistency checks without increasing the risk of connection hangs
due to spurious failures of the additional checks.</t>

<t>The UDP-Guidelines <xref target="RFC8085"></xref> state "an application
SHOULD either use the path MTU information provided by the IP layer or implement
Path MTU Discovery (PMTUD)", but does not provide a mechanism for discovering
the largest size of unfragmented datagram than can be used on a path.
This specification describes how these datagram transports perform PLPMTUD.
This mechanism has not currently been specified for UDP, while Section 10.2 of
<xref target="RFC4821"/> specifies a recommended PLPMTUD probing method for
SCTP.</t>

<t>Section <xref target="Spec"></xref> of this document presents a set of
algorithms for datagram protocols to discover the maximum transmission unit
possible on a path at the packetization layer.
The methods described rely on features of transport protocols and apply to
transport protocols over IPv4 and IPv6.
They do not require cooperation from the lower layers (except that they are
consistent about which packet sizes are acceptable) or from peers.</t>
</section>

<section title="Terminology">
<t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
"SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
document are to be interpreted as described in <xref target="RFC2119"/>.</t>

<t>Other terminology is directly copied from <xref target="RFC4821"/>, the EMTU
definitions are from <xref target="RFC1122"/>.</t>

<t><list style="hanging">
<t hangText="Address:">
An IP Layer identifier for an interface or a set of interfaces.</t>

<t hangText="Classical Path MTU Discovery:">
The process described in <xref target="RFC1191"/> and
<xref target="I-D.ietf-6man-rfc1981bis"/>, in which nodes rely on ICMP PTB
messages to learn the MTU of a path.</t>

<t hangText="Datagram:">
A transport-layer protocol data unit, transmitted in the payload of an
IP packet.</t>

<t hangText="Effective PMTU:">
The current estimated value for PMTU used by a Packetization Layer.</t>

<t hangText="EMTU_S:">
The Effective MTU for sending (EMTU_S) is designated in <xref target="RFC1122"/>
as "the maximum IP datagram size that may be sent, for a particular combination
of IP source and destination addresses...".</t>

<t hangText="EMTU_R:">
The Effective MTU for receiving (EMTU_R) is designated in
<xref target="RFC1122"/> as "the largest datagram size that can be reassembled
by EMTU_R ("Effective MTU to receive")".</t>

<t hangText="Interface:">
A node's attachment to a link.</t>

<t hangText="Link:">
A communication facility or medium over which nodes can communicate at the link
layer, i.e., the layer immediately below IP.
Examples are Ethernet LANs and Internet (or higher) layer and tunnels.</t>

<t hangText="Link MTU:">
Maximum Transmission Unit, the size in bytes of the largest IP packet, including
the IP header and payload, that can be transmitted on a link or path.
Note that this could more properly be called the IP MTU, to be consistent with
how other standards organizations use the acronym MTU.
This includes the IP header, but excludes link layer headers and other framing
that is not part of IP or the IP payload.
Be aware that other standards organizations generally define link MTU to include
the link layer headers.</t>

<t hangText="Packet:">
An IP header plus the IP payload.</t>

<t hangText="Packetization Layer:">
The layer of the network stack that places data into packets and performs
transport protocol functions.</t>

<t hangText="Path:">
The set of links traversed by a packet between a source node and a destination
node.</t>

<t hangText="Path MTU, or PMTU:">
The minimum link MTU of all the links in a path between a source node and a
destination node.</t>

<t hangText="PLPMTUD:">
Packetization Layer Path MTU Discovery, the method described in this document,
which is an extension to classical PMTU Discovery.</t>
</list></t>
</section>

<section title="Requirements">
<t>All of the requirements in <xref target="RFC4821"></xref> apply.
There are also a number of design constraints imposed by datagram transports.
TCP PLPMTUD has been defined using standard TCP protocol mechanism.
Unlike TCP, some datagram transports require additional or optional mechanisms
to implement PLPMTUD.
This can place constraints on deployment when only one end supports the new
method.</t>

<t>There are eight functions that any Datagram PLPMTUD mechanisms needs to
perform:
<list style="numbers">
<t>PMTU parameters: A method MUST utilize information about the maximum size
of packet that can be transmitted by the sender on the local link (Link MTU)
and MAY utilize similar information about the receiver link, when this is
supplied (note this may be less than EMTU_R).
Some applications also have a maximum transport protocol data unit (PDU) size,
in which case there may be no benefit from probing for a size larger than
this (unless a transport offers benefit from multiplexing multiple applications
PDUs into the same datagram.)</t>

<t>Effective PMTU: A datagram application MUST be able to choose
the size of datagrams sent to the network, based on the effective MTU.
This value is managed by the PMTUD method, and sets the maximum size of
datagram that an application can send.
The effective PMTU (specified in Section 1 of <xref target="RFC1191"></xref>)
is equivalent to the EMTU_S (specified in <xref target="RFC1122"></xref>).</t>

<t>Processing ICMP PTB messages: A method MAY optionally utilize ICMP PTB
information from the network layer to help identify when a path does not
support a message size (i.e. reduce the effective PMTU).
The validity of PTB messages SHOULD to be verified before they are used to
update the path MTU discovery information
<xref target="I-D.ietf-6man-rfc1981bis"/>.</t>

<t>Path validation: An endpoint needs to confirm the current path support the
current effective datagram size, without relying solely on ICMP PTB messages.
In this respect, the mechanism MUST be robust to path changes that could have
occurred since the path characteristics were last confirmed.
A method MUST also be robust to the possibility that a flow encounters
reordering, or has the traffic divided over more than one network path.</t>

<t>When to probe: An endpoint method SHOULD determine whether the path capacity
has increased since it last measured the path characteristics.
The endpoint needs a method to determine when a probe datagram is transmitted,
and it MUST cache the values between probes.
This method needs to consider the disruption that may be incurred by an
unsuccessful probe - both upon the flow that incurs a probe loss, and other
flows that experience the effect of additional probe traffic.</t>

<t>Reception feedback: An endpoint MUST provide a feedback method to indicate
when a probe message has been received by the remote endpoint.
If the data in the probe message needs to be sent reliably, the transport needs
to arrange retransmission/repair of any resulting loss.
The method also needs to be robust in the case where probe messages are lost
due to other reasons than a PMTU exceeded (e.g., link transmission error,
congestion).
The isolated loss of a probe packet (with or without an ICMP Packet Too Big
message) is treated as an indication of an MTU limit, and not as a congestion
indicator.
In this case alone, the Packetization Protocol is permitted to retransmit any
missing data without adjusting the congestion window.</t>

<t>Shared state: The specification of PLPMTUD <xref target="RFC4821"/> states:
"If PLPMTUD updates the MTU for a particular path, all Packetization Layer
sessions that share the path representation (as described in Section 5.2 of
<xref target="RFC4821"/>) SHOULD be notified to make use of the new MTU and
make the required congestion control adjustments".
Such methods need to robust to the wide variety of underlying network
forwarding behaviours. Considerations about caching have been noted
<xref target="I-D.ietf-6man-rfc1981bis"/>.</t>

<t>Not interfere with congestion control: If the transport protocol
implements a congestion control, the loss of a probe packet SHOULD NOT
affect the congestion control if the probe packets are not contain
user data.</t>
</list></t>

<section title="PMTU Probing Methods">
<t>Many datagram protocols provide mechanisms to distinguish in-band data from
padding.
In contrast, TCP does generate probes by appropriately segmenting data.
There are three ways of creating probes, using application data, using
application data and padding and padding only:
<list style="symbols">
<t>A probe datagram can contain only padding (these probes consume capacity,
but do not require retransmission of user data) and control data.</t>
<t>A probe datagram can contain user data that is combined with control data
and padding to inflate the length of the datagram to the size required for the
probe.
A loss of this probe could require retransmission/repair of the data if required
by the application/transport.</t>
<t>A probe datagram can contain data supplied by an application that matches
the size required for the probe.
This requires a method to request the application to issue a packet of the
desired probe size.
A loss of this probe could require retransmission/repair of the data if
required by the application/transport.</t>
</list></t>
<t>Three approaches are possible for providing datagram reliability:
<list style="numbers">
<t>A transport/application does not require a probe datagram to
be retransmitted in the event of the loss of a probe.</t>
<t>A transport/application requires retransmission of the
data part of a probe in the event of a loss.</t>
<t>A transport/application is allowed to replicate the data sent in a
probe in a packet (or packets) less than the size current
effective PMTU to reduce the need for retransmission.</t>
</list></t>
</section>
</section>

<section title="Specification of PMTUD for Packetization Layers"
         anchor="Spec">
<t>&lt;&lt;
Fill in a generic algorithm based on sending probe packets, receiving
success indications and possibly handling PTB messages.
These three operations are protocol specific and are described in
<xref target='protocol_specific_methods'/> for various protocols.
&gt;&gt;</t>
</section>

<section title="Specification of Protocol Specific Methods"
         anchor="protocol_specific_methods">

<t>&lt;&lt; In future revisions of this document, this section may be divided
into PMTUD and PLPMTUD methods &gt;&gt;</t>

<section title="UDP and UDP-Lite">
<t>UDP and UDP-LIte <xref target="RFC3828"></xref> do not provide a method that
allows padding to be added to a datagram.</t>

<t>&lt;&lt; This section will be completed in a future revision of this ID
&gt;&gt;</t>

<section title="UDP Options">
<t>UDP places additional design requirements on an application that wishes to
use PLPMTUD. UDP Options permits padding to be added to UDP datagrams
<xref target="I-D.ietf-tsvwg-udp-options"/>, and can be used to provide
reception feedback.
Therefore, UDP-Options can be used to assist UDP applications by supplying
the additional functionality and using this to provide a Datagram PMTUD service
similar to that offered by other transports.</t>

<t>&lt;&lt; This section will be completed in a future revision of this ID
&gt;&gt;</t>
</section>
</section>

<section title="SCTP">
<t>Section 10.2 of <xref target="RFC4821"/> specifies a recommended PLPMTUD
probing method for SCTP.
It recommends use of the PAD chunk, defined in <xref target="RFC4820"/> to
be attached to a minimum length HEARTBEAT chunk to build a probe packet.
This allows to perform probing without affecting the transfer of
user messages and without interfering with congestion control.
Therefore, it is preferred to the use of DATA chunks (with padding
as required) to serve as path probes.</t>

<t>&lt;&lt; We might define a parameter contained in the INIT and INIT ACK chunk
to indicate the MTU to the peer. However, multihoming makes this a bit complex,
so it might not be worth doing.&gt;&gt;</t>

<section title="SCTP/IP4 and SCTP/IPv6"
         anchor="sctp_over_ip">
<t>The base protocol is specified in <xref target="RFC4960"/>.</t>

<section title="Probing"
         anchor="sctp_over_ip_probing">
<t>Probe packets consist of an SCTP common header followed by a HEARTBEAT chunk
and a PAD chunk.
The PAD chunk is used to control the length of the probe packet.
The HEARTBEAT chunk is used to trigger the sending of a HEARTBEAT ACK chunk.
The reception of the HEARTBEAT ACK chunk signals the successful probing.</t>
<t>The HEARTBEAT chunk carries a Heartbeat
Information parameter which should include, besides the information suggested in
<xref target="RFC4960"/>, the probing size, which is the MTU size the complete
datagram will add up to. The size of the PAD chunk is therefore computed by reducing
the probing size by the IPv4 or IPv6 header size, the SCTP common header, the
HEARTBEAT request and the PAD chunk header. The payload of the PAD chunk contains
arbitrary data.</t>
<t>To avoid the fragmentation of retransmitted data, probing starts right after
the handshake before data is sent. Assuming normal behaviour (i.e., the PMTU is smaller
than or equal to the interface MTU), this process will take a few RTTs depending on
the number of MTU sizes probed. A PMTU smaller than the interface MTU is detected
either upon a packet-loss timeout for probe packets or when an ICMP PTB message
arrives. Each path has to be probed independently and every address change triggers a
new phase of MTU probing. A timer must be started when a probe packet is sent and stopped
when it is acknowledged.
When the timer expires the probe packet should be retransmitted. When the number of
retransmissions exceeds a threshold, another state is entered.</t>
</section>

<section title="PTB Message Handling"
         anchor="sctp_over_ip_ptb_handling">
<t>Normal ICMP verification MUST be performed as specified in Appendix C of
<xref target="RFC4960"/>. This requires that the first 8 bytes of the SCTP
common header are contained in the ICMP packet, which is normally fulfilled by
ICMPv4 and ICMPv6.</t>
<t>Relying solely on PTB messages, i.e. without probing, means that data has to be retransmitted which has a negative influence on the performance.</t>
<t>A better approach is to combine active probing with the analysis of the PTB
messages. At best the middlebox also includes its MTU to shorten the process of
probing.</t>
</section>

</section>

<section title="SCTP/UDP">
<t>The UDP encapsulation of SCTP is specified in <xref target="RFC6951"/>.</t>

<section title="Probing"
         anchor="sctp_over_udp_probing">
<t>The probing can be performed as specified in
<xref target='sctp_over_ip_probing'/>. The maximum payload is reduced by 8 bytes, which
has to be considered when filling the PAD chunk.</t>
</section>

<section title="PTB Message Handling"
         anchor="sctp_over_udp_ptb_handling">
<t>Normal ICMP verification has to be performed as specified in
<xref target="RFC4960"/>.
However, this might not be possible for ICMPv4, since it is not guaranteed
that the ICMP packet contains the first 8 bytes of the SCTP common header.
ICMPv6 packets should contain enough information to perform the required
verification.</t>
</section>
</section>

<section title="SCTP/DTLS">
<t>The DTLS encapsulation of SCTP is specified in
<xref target="I-D.ietf-tsvwg-sctp-dtls-encaps"></xref>.
It is used for data channels in WebRTC implementations.</t>
<section title="Probing"
         anchor="sctp_over_dtls_probing">
<t>The probing can be done as specified in
<xref target='sctp_over_ip_probing'/>.</t>
</section>

<section title="PTB Message Handling"
         anchor="sctp_over_dtls_ptb_handling">
<t>Normal ICMP verification can not be performed as specified in
<xref target="RFC4960"/>, since even if the ICMP contains enough information,
the reflected SCTP common header would be encrypted.
Therefore it is not possible to process ICMP PTB messages.</t>
</section>
</section>
</section>

<section title="DCCP">
<t>DCCP <xref target="RFC4340"></xref> implementations are required to support
classical PMTUD and states that a DCCP sender "MUST maintain the maximum packet
size (MPS) allowed for each active DCCP session" and also defines
"current congestion control mechanism (CCMPS), the maximum packet size
supported by the path's links".
It recommends use of PMTUD, and suggests use of DCCP-Sync packets as path
probes, because they do not risk application data loss.
It does not currently specify the use of PLPMTUD methods that could work
independently of the ability to utilise ICMP PTB messages.</t>
<t>&lt;&lt; This section will be completed in a future revision of
this ID &gt;&gt;</t>

<section title="DCCP/UDP">
<t>DCCP/UDP is a UDP-based transport that permits padding to be added to
datagrams, and can provide reception feedback.</t>
<t>&lt;&lt; This section will be completed in a future revision of
this ID &gt;&gt;</t>
</section>
</section>

<section title="QUIC">
<t>QUIC is a UDP-based transport that provides reception feedback
<xref target="I-D.ietf-quic-transport"/>.</t>

<t>&lt;&lt; This section will be completed in a future revision of
this ID &gt;&gt;</t>
</section>
</section>

<section anchor="Acknowledgements" title="Acknowledgements">
<t>This work was partially funded by the European Union's Horizon 2020
research and innovation programme under grant agreement No. 644334 (NEAT).
The views expressed are solely those of the author(s).</t>
</section>

<section anchor="IANA" title="IANA Considerations">
<t>This memo includes no request to IANA.</t>

<t>If there are no requirements for IANA, the section will be removed during
conversion into an RFC by the RFC Editor.</t>
</section>

<section anchor="Security" title="Security Considerations">
<t>The security considerations for the use of UDP and SCTP are provided in the
references RFCs. Security guidance for applications using UDP is
provided in the UDP-Guidelines <xref target="RFC8085"></xref>.</t>

<t>ICMP PTB messages could potentially be used to cause a node to
inappropriately reduce the PMTU.
A node supporting PLPMTUD SHOULD appropriately validate the payload of ICMP PTB
messages to ensure these are received in response to transmitted traffic
(i.e., a reported error condition that corresponds to a datagram actually sent
by the path layer.</t>
</section>
</middle>

<back>
<!-- References split into informative and normative -->
<references title="Normative References">
<!--?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml"?-->

&RFC1122;

&RFC2119;

&RFC3828;

&RFC8085;

&RFC4820;

&RFC4960;

&RFC6951;

&I-D.ietf-6man-rfc1981bis;

&I-D.ietf-tsvwg-udp-options;

&I-D.ietf-tsvwg-sctp-dtls-encaps;

&I-D.ietf-quic-transport;
</references>

<references title="Informative References">
<!-- Here we use entities that we defined at the beginning. -->

&RFC1191;

&RFC4821;

&RFC2923;

&RFC4340;

&RFC4890;

</references>

<section title="Revision Notes">
<t>Note to RFC-Editor: please remove this entire section prior to publication.</t>

<t>Individual draft -00:
<list style="symbols">
<t>This is the first version. Comments and corrections are welcome directly to
the authors or via the IETF TSVWG working group mailing list.</t>
</list></t>
</section>
</back>
</rfc>
